import{_ as i,o as a,c as n,ag as t}from"./chunks/framework.DtpOrGl6.js";const c=JSON.parse('{"title":"Tools","description":"","frontmatter":{},"headers":[],"relativePath":"tools.md","filePath":"tools.md","lastUpdated":1772228606000}'),l={name:"tools.md"};function e(p,s,h,k,o,d){return a(),n("div",null,[...s[0]||(s[0]=[t(`<h1 id="tools" tabindex="-1">Tools <a class="header-anchor" href="#tools" aria-label="Permalink to &quot;Tools&quot;">​</a></h1><p>Tools are the primary way to expose executable actions to an LLM. A tool is a Delphi method decorated with the <code>[McpTool]</code> attribute.</p><h2 id="defining-a-tool-class" tabindex="-1">Defining a Tool Class <a class="header-anchor" href="#defining-a-tool-class" aria-label="Permalink to &quot;Defining a Tool Class&quot;">​</a></h2><p>Register the class and use <code>[McpTool]</code> on the methods you want to expose:</p><div class="language-pascal vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">pascal</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">unit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Demo.HelpDeskService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uses</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  System.SysUtils,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  MCPConnect.MCP.Attributes;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  THelpDeskService = </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  public</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // This method is published as an MCP tool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [McpTool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;doclist&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;List all the available documents&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ListDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      [McpParam(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;category&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Document Category&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ACategory: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ): TContentList;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // This method is NOT exposed — it lacks the [McpTool] attribute</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    procedure</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InternalStuff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Methods without <code>[McpTool]</code> are completely invisible to the MCP protocol, so you can freely mix internal and public logic in the same class.</p><h2 id="organizing-tools-with-scopes" tabindex="-1">Organizing Tools with Scopes <a class="header-anchor" href="#organizing-tools-with-scopes" aria-label="Permalink to &quot;Organizing Tools with Scopes&quot;">​</a></h2><p>When building larger MCP servers with multiple tool classes, assign a <strong>scope</strong> (namespace prefix) using the <code>[McpScope]</code> attribute. This avoids name conflicts and produces a cleaner API.</p><h3 id="why-use-scopes" tabindex="-1">Why Use Scopes? <a class="header-anchor" href="#why-use-scopes" aria-label="Permalink to &quot;Why Use Scopes?&quot;">​</a></h3><ul><li><strong>Avoid conflicts</strong> — Multiple tool classes can have methods with the same name.</li><li><strong>Clear organization</strong> — Group related tools logically.</li><li><strong>Better API structure</strong> — Tools are exposed as <code>scope_toolname</code> (e.g., <code>auth_login</code>).</li></ul><h3 id="defining-a-scoped-tool-class" tabindex="-1">Defining a Scoped Tool Class <a class="header-anchor" href="#defining-a-scoped-tool-class" aria-label="Permalink to &quot;Defining a Scoped Tool Class&quot;">​</a></h3><div class="language-pascal vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">pascal</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[McpScope(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TAuthService = </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [McpTool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;login&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Authenticate user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([McpParam(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;username&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)] AUser: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [McpTool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;logout&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Logout user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Logout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Exposed tool names will be <code>auth_login</code> and <code>auth_logout</code>.</p><h3 id="multiple-scoped-classes" tabindex="-1">Multiple Scoped Classes <a class="header-anchor" href="#multiple-scoped-classes" aria-label="Permalink to &quot;Multiple Scoped Classes&quot;">​</a></h3><div class="language-pascal vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">pascal</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[McpScope(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]    TAuthService   = </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ... </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[McpScope(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tickets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)] TTicketService = </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ... </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[McpScope(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]   TUserService   = </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ... </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Registration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FJRPCServer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .Plugin.Configure&lt;IMCPConfig&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .Tools</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .RegisterClass(TAuthService)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// auth_login, auth_logout</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .RegisterClass(TTicketService)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// tickets_list, tickets_create</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .RegisterClass(TUserService)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// users_get, users_update</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .BackToMCP;</span></span></code></pre></div><blockquote><p><strong>Important:</strong> Tool names must match the MCP pattern <code>^[a-zA-Z0-9_-]{1,64}$</code> (only alphanumeric, underscore, hyphen).</p></blockquote><h2 id="tool-annotations" tabindex="-1">Tool Annotations <a class="header-anchor" href="#tool-annotations" aria-label="Permalink to &quot;Tool Annotations&quot;">​</a></h2><p><code>[McpTool]</code> accepts an optional third string parameter for key-value annotations:</p><div class="language-pascal vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">pascal</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[McpTool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my_tool&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Description&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app=ui://my-app/index.html,category=demo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyTool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Supported built-in annotations:</p><table tabindex="0"><thead><tr><th>Key</th><th>Example</th><th>Meaning</th></tr></thead><tbody><tr><td><code>app</code></td><td><code>app=ui://my-app/index.html</code></td><td>Links tool to an MCP App UI</td></tr><tr><td><code>disabled</code></td><td><code>disabled</code></td><td>Hides the tool from the tools list</td></tr></tbody></table>`,21)])])}const E=i(l,[["render",e]]);export{c as __pageData,E as default};
